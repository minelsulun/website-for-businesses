<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ürün Kataloğu | Ege Net Prefabrik</title>
    <style>
      :root { color-scheme: light dark; }
      body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background:#0b0b0b; color:#f5f5f5; }
      header { position: sticky; top: 0; backdrop-filter: blur(8px); background: rgba(11,11,11,0.6); border-bottom: 1px solid rgba(255,255,255,0.08); z-index: 10; }
      .container { max-width: 1100px; margin: 0 auto; padding: 16px 24px; }
      .title { font-size: 20px; letter-spacing: .25em; color: #ab0000; text-transform: uppercase; }
      h1 { margin: 8px 0 0; font-size: 28px; }
      .grid { display: grid; gap: 16px; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); padding: 24px; }
      .card { border: 1px solid rgba(255,255,255,0.08); border-radius: 16px; overflow: hidden; background: #111; box-shadow: 0 10px 30px rgba(0,0,0,.35); }
      .thumb { width: 100%; aspect-ratio: 4/3; object-fit: cover; display: block; }
      .caption { padding: 10px 12px; font-size: 12px; color: #bdbdbd; }
      .empty { padding: 48px 24px; text-align: center; color: #bdbdbd; }
      a.back { color: #e0e0e0; text-decoration: none; border: 1px solid rgba(255,255,255,0.25); padding: 6px 10px; border-radius: 999px; font-size: 12px; }
      a.back:hover { background: rgba(255,255,255,0.08); }
    </style>
  </head>
  <body>
    <header>
      <div class="container" style="display:flex;justify-content:space-between;align-items:center;gap:12px">
        <div>
          <div class="title">Ege Net Prefabrik</div>
          <h1>Ürün Kataloğu</h1>
        </div>
        <a class="back" href="/" rel="noopener">Ana sayfaya dön</a>
      </div>
    </header>

    <main class="container">
      <div id="gallery" class="grid"></div>
      <div id="empty" class="empty" style="display:none">
        Henüz görüntülenecek fotoğraf bulunamadı. Lütfen <code>public/EGENET FOTO/index.json</code> dosyasına resim dosya adlarını ekleyin.
      </div>
    </main>

    <script>
      async function loadGallery() {
        const gallery = document.getElementById('gallery');
        const empty = document.getElementById('empty');
        try {
          // Note: space in folder name must be URL-encoded as %20
          const res = await fetch('/EGENET%20FOTO/index.json', { cache: 'no-cache' });
          if (!res.ok) throw new Error('index.json okunamadı');
          const files = await res.json();

          if (!Array.isArray(files) || files.length === 0) {
            empty.style.display = 'block';
            return;
          }

          files.forEach((file) => {
            const src = '/EGENET%20FOTO/' + encodeURIComponent(file);
            const card = document.createElement('div');
            card.className = 'card';

            const img = document.createElement('img');
            img.loading = 'lazy';
            img.src = src;
            img.alt = file;
            img.className = 'thumb';

            const cap = document.createElement('div');
            cap.className = 'caption';
            cap.textContent = file;

            card.appendChild(img);
            card.appendChild(cap);
            gallery.appendChild(card);
          });
        } catch (e) {
          empty.style.display = 'block';
          console.error(e);
        }
      }
      loadGallery();
    </script>
  </body>
</html>
